<table id="head">
	<thead>
		<tr>
			<th class="title" colspan="4">TEAM LEADERBOARD</th>
		</tr>
		<tr>
			<th class="small"></th>
			<th class="big">NAME</th>
			<th>SCORE</th>
			<th>+/- <span style="font-size:14px;position:relative;bottom:2px;">(par <%= @team_par %>)</span></th>
		</tr>
	</thead>
</table>
<div id="scroll">
	<table id="body">
		<tbody>
			<% @teams.each_with_index do |team,i| %>
				<tr>
					<% if team.score > 0 %>
						<% if team.score == @prev_score %>
							<td class="small">T<%= @prev_position %></td>
						<% else %>
							<% if @teams[i+1] && team.score == @teams[i+1].score %>
								<td class="small">T<%= i+1 %></td>
							<% else %>
								<td class="small"><%= i+1 %></td>
							<% end %>
							<% @prev_score = team.score %>
							<% @prev_position = i+1 %>
						<% end %>
						<td class="big"><%= team.name %></td>
						<td><%= team.score %></td>
						<td><%= team.score-@team_par %></td>
					<% else %>
						<td class="small">-</td>
						<td class="big"><%= team.name %></td>
						<td>-</td>
						<td>-</td>
					<% end %>
				</tr>
			<% end %>
		</tbody>
	</table>
</div>

<script type="text/javascript">
	$(document).ready(function() {
		clearTimeout(window.pro1);
		clearTimeout(window.pro2);
		$("#scroll").css("height", Math.max($(window).height()-($("table#head").height()+212), 284)+"px");
		$("#scroll").scrollTop($("#scroll").prop("scrollHeight"));
		window.team1 = setTimeout(function() {
			clearInterval(window.team1);
			$("#scroll").animate({
				scrollTop: 0
			}, <%= (@interval.to_f*0.7).to_i %>, "linear", function() {
				window.team2 = setTimeout(function() {
					clearInterval(window.team2);
					$("div#content table").fadeOut("fast", function() {
						$.get("/get_pros", function(response) {
							$("div#content").html(response);
						});
					});
				},<%= (@interval.to_f*0.2).to_i %>);
			});
		}, <%= (@interval.to_f*0.1).to_i %>);
	});
</script>